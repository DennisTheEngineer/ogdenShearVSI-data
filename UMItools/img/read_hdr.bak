function hdr = read_hdr(name)

% function hdr = read_hdr(name)
% Luis hernandez
% last edit 1-7-98
%
% Loads the analyze format header file from a file 'name' 
%
% The function returns a structure defined as 
% hdr = struct(...
%      'sizeof_hdr', fread(pFile, 1,'int32'),...
%      'pad1', setstr(fread(pFile, 28, 'char')),...
%      'extents', fread(pFile, 1,'int32'),...
%      'pad2', setstr(fread(pFile, 2, 'char')),...
%      'regular',setstr(fread(pFile, 1,'char')), ...
%      'pad3', setstr(fread(pFile,1, 'char')),...
%      'dims', fread(pFile, 1,'int16'),...
%      'xdim', fread(pFile, 1,'int16'),...
%      'ydim', fread(pFile, 1,'int16'),...
%      'zdim', fread(pFile, 1,'int16'),...
%      'tdim', fread(pFile, 1,'int16'),...
%      'pad4', setstr(fread(pFile,20, 'char')),...
%      'datatype', fread(pFile, 1,'int16'),...
%      'bits', fread(pFile, 1,'int16'),...
%      'pad5', setstr(fread(pFile, 6, 'char')),...
%      'xsize', fread(pFile, 1,'float'),...
%      'ysize', fread(pFile, 1,'float'),...
%      'zsize', fread(pFile, 1,'float'),...
%      'pad6', setstr(fread(pFile, 48, 'char'))...
%      'glmax', fread(pFile, 1,'int32'),...
%      'glmin', fread(pFile, 1,'int32'),... 
%      'descrip', setstr(fread(pFile, 80,'char')),...
%      'pad7', setstr(fread(pFile, 120, 'char'))...
%      )
   

   
   % Read in Headerfile into the hdrstruct
   [pFile,messg] = fopen(name, 'r');
   if pFile == -1
      errormesg(messg); 
      return;
   end
   
   
   hdr = struct(...
      'sizeof_hdr', fread(pFile, 1,'int32'),...
      'pad1', setstr(fread(pFile, 28, 'char')),...
      'extents', fread(pFile, 1,'int32'),...
      'pad2', setstr(fread(pFile, 2, 'char')),...
      'regular',setstr(fread(pFile, 1,'char')), ...
      'pad3', setstr(fread(pFile,1, 'char')),...
      'dims', fread(pFile, 1,'int16'),...
      'xdim', fread(pFile, 1,'int16'),...
      'ydim', fread(pFile, 1,'int16'),...
      'zdim', fread(pFile, 1,'int16'),...
      'tdim', fread(pFile, 1,'int16'),...
      'pad4', setstr(fread(pFile,20, 'char')),...
      'datatype', fread(pFile, 1,'int16'),...
      'bits', fread(pFile, 1,'int16'),...
      'pad5', setstr(fread(pFile, 6, 'char')),...
      'xsize', fread(pFile, 1,'float'),...
      'ysize', fread(pFile, 1,'float'),...
      'zsize', fread(pFile, 1,'float'),...
      'pad6', setstr(fread(pFile, 48, 'char')),...
      'glmax', fread(pFile, 1,'int32'),...
      'glmin', fread(pFile, 1,'int32'),... 
      'descrip', setstr(fread(pFile, 80,'char')),...
      'pad7', setstr(fread(pFile, 120, 'char'))...
      )
   

   fclose(pFile);
   
return


