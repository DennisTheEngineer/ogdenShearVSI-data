function write_hdr(name,hdr)

% function write_hdr(name,hdr)
% Luis hernandez
% last edit 1-7-98
%
% Writes the analyze format header file from a file 'name' 
%
% The function opens a file and writes the structure to it
% hdr = struct(...
%      'sizeof_hdr', fread(pFile, 1,'int32'),...
%      'pad1', setstr(fread(pFile, 28, 'char')),...
%      'extents', fread(pFile, 1,'int32'),...
%      'pad2', setstr(fread(pFile, 2, 'char')),...
%      'regular',setstr(fread(pFile, 1,'char')), ...
%      'pad3', setstr(fread(pFile,1, 'char')),...
%      'dims', fread(pFile, 1,'int16'),...
%      'xdim', fread(pFile, 1,'int16'),...
%      'ydim', fread(pFile, 1,'int16'),...
%      'zdim', fread(pFile, 1,'int16'),...
%      'tdim', fread(pFile, 1,'int16'),...
%      'pad4', setstr(fread(pFile,20, 'char')),...
%      'datatype', fread(pFile, 1,'int16'),...
%      'bits', fread(pFile, 1,'int16'),...
%      'pad5', setstr(fread(pFile, 6, 'char')),...
%      'xsize', fread(pFile, 1,'float'),...
%      'ysize', fread(pFile, 1,'float'),...
%      'zsize', fread(pFile, 1,'float'),...
%      'glmax', fread(pFile, 1,'int32'),...
%      'glmin', fread(pFile, 1,'int32'),... 
%      'descrip', setstr(fread(pFile, 80,'char')),...
%      'pad6', setstr(fread(pFile, 120, 'char'))...
%      )
   

   
   % Read in Headerfile into the hdrstruct
   [pFile,messg] = fopen(name, 'wb');
   if pFile == -1
      errormesg(messg);   
   end
   
        
      fwrite(pFile, hdr.sizeof_hdr,'int32');
      fwrite(pFile,hdr.pad1, 'char');
      fwrite(pFile,hdr.extents, 'int32');
      fwrite(pFile,hdr.pad2, 'char');
      fwrite(pFile,hdr.regular','char');
      fwrite(pFile,hdr.pad3', 'char');
      fwrite(pFile,hdr.dims','int16');
      fwrite(pFile,hdr.xdim','int16');
      fwrite(pFile,hdr.ydim', 'int16');
      fwrite(pFile,hdr.zdim', 'int16');
      fwrite(pFile,hdr.tdim', 'int16');
      fwrite(pFile,hdr.pad4', 'char');
      fwrite(pFile,hdr.datatype,'int16');
      fwrite(pFile,hdr.bits','int16');
      fwrite(pFile,hdr.pad5','char');
      fwrite(pFile,hdr.xsize', 'float');
      fwrite(pFile,hdr.ysize', 'float');
      fwrite(pFile,hdr.zsize', 'float');
      fwrite(pFile,hdr.pad6','char');
      fwrite(pFile,hdr.glmax', 'int32');
      fwrite(pFile,hdr.glmin', 'int32');
      fwrite(pFile,hdr.descrip','char');
      fwrite(pFile,hdr.pad7','char');
      
   

   fclose(pFile);
   
return


